import{r as l,j as e,d as b,B as g,C as j,S as v,a as p,b as y,L as S,P as z,e as B}from"./chunks/index.d53JA_Gb.js";const C=l.forwardRef(({className:t,type:s,...n},a)=>e.jsx("input",{type:s,className:b("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n}));C.displayName="Input";const N=({onComplete:t})=>{const[s,n]=l.useState(1),[a,o]=l.useState(""),[i,c]=l.useState("nested"),u=()=>{s===1&&a.trim()&&n(2)},h=()=>{a.trim()&&t({persona:a.trim(),structure:i,setupCompleted:!0})};return e.jsxs("div",{className:"h-full liquid-gradient-secondary overflow-y-auto",children:[e.jsx("div",{className:"liquid-glass border-b border-white/20",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-3 liquid-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Welcome to Bookmark Categorizer"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Let's set up your preferences"})]})})}),s===1&&e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2 text-sm",children:"Step 1: Your Persona"}),e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Describe your interests as comma-separated values. This helps categorize bookmarks more accurately."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Your Interests"}),e.jsx(C,{value:a,onChange:d=>o(d.target.value),placeholder:"e.g., React, AI, Marketing, Design, Finance",autoFocus:!0,className:"text-sm"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'Example: "Software Development, React, TypeScript, AI, Machine Learning"'})]}),e.jsx("div",{className:"flex justify-end pt-3",children:e.jsx(g,{onClick:u,disabled:!a.trim(),className:"text-sm py-2",children:"Next"})})]}),s===2&&e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2 text-sm",children:"Step 2: Category Structure"}),e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Choose how you want your bookmarks to be organized."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"structure",value:"nested",checked:i==="nested",onChange:d=>c(d.target.value),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Nested Categories"}),e.jsx("div",{className:"text-xs text-slate-600",children:'Organize in folders like "Development/Frontend/React"'})]})]}),e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"structure",value:"flattened",checked:i==="flattened",onChange:d=>c(d.target.value),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Flattened Categories"}),e.jsx("div",{className:"text-xs text-slate-600",children:'Simple categories like "React", "AI", "Design"'})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-3",children:[e.jsx(g,{variant:"ghost",onClick:()=>n(1),className:"text-sm py-2",children:"Back"}),e.jsx(g,{onClick:h,className:"text-sm py-2",children:"Complete Setup"})]})]})]})},D=()=>{const[t,s]=l.useState(null),[n,a]=l.useState(!1),[o,i]=l.useState(0),[c,u]=l.useState(0),[h,d]=l.useState(!1);l.useEffect(()=>{r()},[]);const r=async()=>{const m=await j.get(v.USER_SETTINGS);s(m),await p.syncWithChromeBookmarks();const f=await p.getValidCategorizedBookmarks();i(f.length);const k=await p.getUncategorized();u(k.length)};return{settings:t,setSettings:s,isLoading:n,setIsLoading:a,categorizedCount:o,setCategorizedCount:i,uncategorizedCount:c,setUncategorizedCount:u,showSettings:h,setShowSettings:d,loadData:r,handleSetupComplete:async m=>{await j.set(v.USER_SETTINGS,m),s(m),d(!1)}}},P=(t,s,n)=>{const[a,o]=l.useState(!1),[i,c]=l.useState([]);return{previewOpen:a,previewBookmarks:i,handleCategorizeBookmarks:async()=>{if(t){s(!0);try{const r=await p.getUncategorized();if(r.length===0){s(!1);return}const x=await p.getBookmarksWithDescriptions(r),m=await y.categorize({persona:t.persona,bookmarks:x,structure:t.structure});if(m.error)throw new Error(m.error);m.data&&(c(m.data),o(!0))}catch(r){console.error("Categorization error:",r),s(!1)}}},handleAcceptPreview:async()=>{o(!1),s(!0);try{if(!t){s(!1),c([]);return}const r=await j.get(v.CATEGORIZED_BOOKMARKS)||{};i.forEach(x=>{x.id&&(r[x.id]={bookmark:x,categorizedAt:Date.now()})}),await j.set(v.CATEGORIZED_BOOKMARKS,r),await p.organizeBookmarksInChrome(i,t.structure==="flattened"?"flatten":"nested"),await n()}catch(r){console.error("Error organizing bookmarks:",r)}finally{s(!1),c([])}},handleDenyPreview:()=>{o(!1),s(!1),c([])}}},E=({persona:t,onSettingsClick:s})=>e.jsx("div",{className:"liquid-glass border-b border-white/20",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 liquid-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-slate-900",children:"Bookmark Categorizer"}),e.jsx("p",{className:"text-xs text-slate-600",children:t})]})]}),e.jsx("button",{onClick:s,className:"p-1 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})}),A=({categorizedCount:t,uncategorizedCount:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"liquid-card p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:t}),e.jsx("div",{className:"text-xs text-slate-600",children:"Categorized"})]}),e.jsxs("div",{className:"liquid-card p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:s}),e.jsx("div",{className:"text-xs text-slate-600",children:"Uncategorized"})]})]}),O=({isLoading:t,uncategorizedCount:s,onCategorize:n,onOpenDashboard:a,disableCategorize:o})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs(g,{onClick:n,disabled:o,className:"w-full text-sm py-2.5 shadow-lg",children:[t?e.jsx(S,{size:"sm",className:"mr-2"}):null,t?"Categorizing...":`Categorize ${s} Bookmarks`]}),e.jsx(g,{onClick:a,variant:"outline",className:"w-full text-sm py-2.5",children:"Open Dashboard"})]}),R=({structure:t})=>e.jsx("div",{className:"liquid-card p-3",children:e.jsxs("div",{className:"text-xs text-slate-600",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Structure:"})," ",t]}),e.jsx("p",{children:"Bookmarks are automatically organized in Chrome's native bookmark system."})]})}),M=()=>{const{settings:t,isLoading:s,setIsLoading:n,categorizedCount:a,uncategorizedCount:o,showSettings:i,setShowSettings:c,loadData:u,handleSetupComplete:h}=D(),{previewOpen:d,previewBookmarks:r,handleCategorizeBookmarks:x,handleAcceptPreview:m,handleDenyPreview:f}=P(t,n,u),k=()=>{chrome.tabs.create({url:chrome.runtime.getURL("dashboard.html")})};return t?i?e.jsx("div",{className:"w-80 h-96 liquid-gradient-secondary rounded-sm",children:e.jsx(N,{onComplete:h})}):e.jsxs("div",{className:"w-80 h-96 liquid-gradient-secondary rounded-sm",children:[e.jsx(E,{persona:t.persona,onSettingsClick:()=>c(!0)}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(A,{categorizedCount:a,uncategorizedCount:o}),e.jsx(O,{isLoading:s,uncategorizedCount:o,onCategorize:x,onOpenDashboard:k,disableCategorize:s||o===0}),e.jsx(R,{structure:t.structure}),e.jsx(z,{isOpen:d,onAccept:m,onDeny:f,categorizedBookmarks:r})]})]}):e.jsx("div",{className:"w-80 h-96 liquid-gradient-secondary rounded-sm",children:e.jsx(N,{onComplete:h})})},w=document.getElementById("popup-root");w&&B(w).render(e.jsx(M,{}));
