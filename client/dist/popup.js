import{r,j as e,d as R,B as u,C as p,S as g,a as d,L as I,P as M,b as O,e as A}from"./chunks/index.BVHNJ289.js";const S=r.forwardRef(({className:a,type:i,...n},s)=>e.jsx("input",{type:i,className:R("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n}));S.displayName="Input";const y=({onComplete:a})=>{const[i,n]=r.useState(1),[s,j]=r.useState(""),[m,x]=r.useState("nested"),v=()=>{i===1&&s.trim()&&n(2)},f=()=>{s.trim()&&a({persona:s.trim(),structure:m,setupCompleted:!0})};return e.jsxs("div",{className:"h-full liquid-gradient-secondary overflow-y-auto",children:[e.jsx("div",{className:"liquid-glass border-b border-white/20",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 mx-auto mb-3 liquid-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Welcome to Bookmark Categorizer"}),e.jsx("p",{className:"text-xs text-slate-600",children:"Let's set up your preferences"})]})})}),i===1&&e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2 text-sm",children:"Step 1: Your Persona"}),e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Describe your interests as comma-separated values. This helps categorize bookmarks more accurately."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Your Interests"}),e.jsx(S,{value:s,onChange:o=>j(o.target.value),placeholder:"e.g., React, AI, Marketing, Design, Finance",autoFocus:!0,className:"text-sm"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'Example: "Software Development, React, TypeScript, AI, Machine Learning"'})]}),e.jsx("div",{className:"flex justify-end pt-3",children:e.jsx(u,{onClick:v,disabled:!s.trim(),className:"text-sm py-2",children:"Next"})})]}),i===2&&e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2 text-sm",children:"Step 2: Category Structure"}),e.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Choose how you want your bookmarks to be organized."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"structure",value:"nested",checked:m==="nested",onChange:o=>x(o.target.value),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Nested Categories"}),e.jsx("div",{className:"text-xs text-slate-600",children:'Organize in folders like "Development/Frontend/React"'})]})]}),e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"structure",value:"flattened",checked:m==="flattened",onChange:o=>x(o.target.value),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:"Flattened Categories"}),e.jsx("div",{className:"text-xs text-slate-600",children:'Simple categories like "React", "AI", "Design"'})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-3",children:[e.jsx(u,{variant:"ghost",onClick:()=>n(1),className:"text-sm py-2",children:"Back"}),e.jsx(u,{onClick:f,className:"text-sm py-2",children:"Complete Setup"})]})]})]})},q=()=>{const[a,i]=r.useState(null),[n,s]=r.useState(!1),[j,m]=r.useState(0),[x,v]=r.useState(0),[f,o]=r.useState(!1),[z,k]=r.useState(!1),[N,h]=r.useState([]);r.useEffect(()=>{w()},[]);const w=async()=>{const t=await p.get(g.USER_SETTINGS);i(t),await d.syncWithChromeBookmarks();const l=await d.getValidCategorizedBookmarks();m(l.length);const c=await d.getUncategorized();v(c.length)},B=async()=>{if(a){s(!0);try{const t=await d.getUncategorized();if(t.length===0){s(!1);return}const l=await d.getBookmarksWithDescriptions(t),c=await O.categorize({persona:a.persona,bookmarks:l,structure:a.structure});if(c.error)throw new Error(c.error);c.data&&(h(c.data),k(!0))}catch(t){console.error("Categorization error:",t),s(!1)}}},E=async()=>{k(!1),s(!0);try{if(!a){s(!1),h([]);return}const t=await p.get(g.CATEGORIZED_BOOKMARKS)||{};N.forEach(l=>{l.id&&(t[l.id]={bookmark:l,categorizedAt:Date.now()})}),await p.set(g.CATEGORIZED_BOOKMARKS,t),await d.organizeBookmarksInChrome(N,a.structure==="flattened"?"flatten":"nested"),await w()}catch(t){console.error("Error organizing bookmarks:",t)}finally{s(!1),h([])}},L=()=>{k(!1),s(!1),h([])},D=()=>{chrome.tabs.create({url:chrome.runtime.getURL("dashboard.html")})},b=async t=>{await p.set(g.USER_SETTINGS,t),i(t),o(!1)};return a?f?e.jsx("div",{className:"w-80 h-96 liquid-gradient-secondary rounded-sm",children:e.jsx(y,{onComplete:b})}):e.jsxs("div",{className:"w-80 h-96 liquid-gradient-secondary rounded-sm",children:[e.jsx("div",{className:"liquid-glass border-b border-white/20",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 liquid-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-slate-900",children:"Bookmark Categorizer"}),e.jsx("p",{className:"text-xs text-slate-600",children:a.persona})]})]}),e.jsx("button",{onClick:()=>o(!0),className:"p-1 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"liquid-card p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:j}),e.jsx("div",{className:"text-xs text-slate-600",children:"Categorized"})]}),e.jsxs("div",{className:"liquid-card p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:x}),e.jsx("div",{className:"text-xs text-slate-600",children:"Uncategorized"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(u,{onClick:B,disabled:n||x===0,className:"w-full text-sm py-2.5 shadow-lg",children:[n?e.jsx(I,{size:"sm",className:"inline-block mr-2"}):null,"Categorize Bookmarks"]}),e.jsxs(u,{variant:"ghost",onClick:D,className:"w-full text-sm py-2.5 shadow-lg",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open Full Dashboard"]})]}),e.jsx("div",{className:"liquid-card p-3",children:e.jsxs("div",{className:"text-xs text-slate-600",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Structure:"})," ",a.structure]}),e.jsx("p",{children:"Bookmarks are automatically organized in Chrome's native bookmark system."})]})})]}),e.jsx(M,{isOpen:z,onAccept:E,onDeny:L,categorizedBookmarks:N})]}):e.jsx("div",{className:"w-80 h-96 liquid-gradient-secondary rounded-sm",children:e.jsx(y,{onComplete:b})})},C=document.getElementById("popup-root");C&&A(C).render(e.jsx(q,{}));
