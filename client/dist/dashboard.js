import{r as p,j as e,C as V,S as R,a as E,B as U,L as F,b as I,c as D,R as P}from"./chunks/index.BULb0shC.js";const T=({bookmarks:w,onSearchResults:b,placeholder:y="Search bookmarks, categories, or describe what you're looking for...",className:A=""})=>{const[m,N]=p.useState(""),[f,C]=p.useState(!1),[j,L]=p.useState([]),[k,z]=p.useState([]),M=p.useRef(null),v=w||[];console.log("IntentSearch render:",{bookmarksLength:v.length,query:m,isFocused:f,className:A});const x={category:/\b(category|folder|space|group|type)\b/i,recent:/\b(recent|latest|new|today|yesterday)\b/i,favorite:/\b(favorite|starred|important|essential)\b/i,learning:/\b(learn|study|course|tutorial|education|training)\b/i,work:/\b(work|job|professional|business|productivity)\b/i,entertainment:/\b(fun|entertainment|game|video|music|social)\b/i,url:/\b(https?:\/\/|www\.|\.com|\.org|\.net)\b/i},B=t=>{if(!t.trim())return[];const s=[],o=t.toLowerCase(),l=[...new Set(v.map(h=>Array.isArray(h.category)?h.category.join("/"):h.category))].filter(h=>h.toLowerCase().includes(o)).slice(0,3);s.push(...l);const c=v.filter(h=>h.title.toLowerCase().includes(o)).map(h=>h.title).slice(0,2);return s.push(...c),x.learning.test(t)&&s.push("Learning courses","Programming tutorials","Study materials"),x.work.test(t)&&s.push("Work tools","Productivity apps","Business resources"),x.entertainment.test(t)&&s.push("Entertainment","Social media","Videos"),[...new Set(s)].slice(0,5)},r=t=>{const s=[];return x.category.test(t)&&s.push({type:"category",query:t,weight:.8}),x.recent.test(t)&&s.push({type:"recent",query:t,weight:.7}),x.favorite.test(t)&&s.push({type:"favorite",query:t,weight:.7}),x.learning.test(t)&&s.push({type:"learning",query:t,weight:.9}),x.work.test(t)&&s.push({type:"work",query:t,weight:.9}),x.entertainment.test(t)&&s.push({type:"entertainment",query:t,weight:.9}),x.url.test(t)&&s.push({type:"url",query:t,weight:.6}),t.trim()&&s.push({type:"title",query:t,weight:.5}),s},a=t=>{if(!t.trim())return b(v),v;const s=r(t),o=new Map;s.forEach(l=>{v.forEach(c=>{let h=0;const S=l.query.toLowerCase(),$=c.title.toLowerCase(),g=Array.isArray(c.category)?c.category.join("/").toLowerCase():c.category.toLowerCase(),W=c.url.toLowerCase();switch(l.type){case"category":g.includes(S)&&(h+=l.weight*2);break;case"title":$.includes(S)&&(h+=l.weight),$.startsWith(S)&&(h+=l.weight*.5);break;case"url":W.includes(S)&&(h+=l.weight);break;case"recent":c.categorizedAt&&Date.now()-c.categorizedAt<7*24*60*60*1e3&&(h+=l.weight);break;case"learning":(g.includes("learn")||g.includes("course")||g.includes("tutorial")||g.includes("education"))&&(h+=l.weight*1.5);break;case"work":(g.includes("work")||g.includes("business")||g.includes("productivity")||g.includes("professional"))&&(h+=l.weight*1.5);break;case"entertainment":(g.includes("entertainment")||g.includes("social")||g.includes("video")||g.includes("game"))&&(h+=l.weight*1.5);break}if(h>0){const q=o.get(c.id||c.url);(!q||h>q.score)&&o.set(c.id||c.url,{bookmark:c,score:h})}})});const u=Array.from(o.values()).sort((l,c)=>c.score-l.score).map(l=>l.bookmark);return b(u),u},i=t=>{N(t);const s=B(t);L(s),a(t),t.trim()&&!k.includes(t.trim())&&z(o=>[t.trim(),...o.slice(0,4)])},n=t=>{var s;N(t),L([]),a(t),(s=M.current)==null||s.blur()},d=t=>{var s;t.key==="Escape"&&(L([]),C(!1),(s=M.current)==null||s.blur())};return p.useEffect(()=>{b(v)},[v]),e.jsxs("div",{className:`relative ${A}`,style:{minHeight:"60px"},children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:M,type:"text",value:m,onChange:t=>i(t.target.value),onFocus:()=>C(!0),onBlur:()=>setTimeout(()=>C(!1),200),onKeyDown:d,placeholder:y,className:"liquid-search",style:{minHeight:"48px"}}),e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),m&&e.jsx("button",{onClick:()=>i(""),className:"absolute right-12 top-1/2 transform -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f&&(j.length>0||k.length>0)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 liquid-glass rounded-2xl p-2 z-50 max-h-80 overflow-y-auto",children:[k.length>0&&!m&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 px-3 py-2",children:"Recent Searches"}),k.map((t,s)=>e.jsxs("button",{onClick:()=>n(t),className:"w-full text-left px-3 py-2 rounded-xl text-sm text-slate-600 hover:bg-white/60 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:t})]},s))]}),j.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 px-3 py-2",children:"Suggestions"}),j.map((t,s)=>e.jsxs("button",{onClick:()=>n(t),className:"w-full text-left px-3 py-2 rounded-xl text-sm text-slate-600 hover:bg-white/60 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:t})]},s))]})]})]})},O={blue:"from-blue-500/20 to-blue-600/20 text-blue-600",purple:"from-purple-500/20 to-purple-600/20 text-purple-600",green:"from-green-500/20 to-green-600/20 text-green-600",orange:"from-orange-500/20 to-orange-600/20 text-orange-600",pink:"from-pink-500/20 to-pink-600/20 text-pink-600",indigo:"from-indigo-500/20 to-indigo-600/20 text-indigo-600"},K={blue:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),purple:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),green:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),orange:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),pink:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),indigo:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},H=({title:w,bookmarks:b,subcategories:y,icon:A,color:m="blue",onBookmarkClick:N,onSpaceClick:f,className:C="",level:j=0})=>{const[L,k]=p.useState(!1),[z,M]=p.useState(!1),v=()=>{k(!L),f==null||f()},x=n=>{N==null||N(n)},B=n=>{try{return new URL(n).hostname.replace("www.","").split(".")[0]}catch{return"link"}},r=n=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(n).hostname}&sz=32`}catch{return""}},a=(n,d)=>{let t=n.length;if(d)for(const s of d.values())t+=a(s.bookmarks,s.subcategories);return t},i=a(b,y);return e.jsxs("div",{className:`liquid-space ${C} ${j>0?"ml-4 border-l-2 border-slate-200/50 pl-4":""}`,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:[e.jsxs("div",{className:"liquid-space-header",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`liquid-space-icon bg-gradient-to-br ${O[m]}`,children:A||K[m]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:w}),e.jsxs("p",{className:"text-sm text-slate-500",children:[i," bookmarks"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:v,className:`p-2 rounded-xl transition-all duration-200 ${z?"bg-white/60 text-slate-600":"text-slate-400"}`,children:e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${L?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})})]}),L&&e.jsxs("div",{className:"space-y-2 liquid-fade-in",children:[b.slice(0,5).map((n,d)=>e.jsxs("div",{onClick:()=>x(n),className:"group flex items-center space-x-3 p-3 rounded-xl hover:bg-white/60 transition-all duration-200 cursor-pointer",children:[e.jsxs("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:r(n.url),alt:"",className:"w-5 h-5",onError:t=>{var o;const s=t.target;s.style.display="none",(o=s.nextElementSibling)==null||o.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-5 h-5 bg-gradient-to-br from-slate-400 to-slate-500 rounded flex items-center justify-center text-white text-xs font-medium",children:B(n.url).charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 truncate group-hover:text-blue-600 transition-colors",children:n.title}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:B(n.url)})]}),e.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]},n.id||`${n.url}-${d}`)),b.length>5&&e.jsx("div",{className:"text-center py-2",children:e.jsxs("span",{className:"text-xs text-slate-500",children:["+",b.length-5," more bookmarks"]})}),y&&Array.from(y.entries()).map(([n,d])=>e.jsx(H,{title:n,bookmarks:d.bookmarks,subcategories:d.subcategories,color:m,onBookmarkClick:N,level:j+1},n))]})]})},G=({bookmarks:w,onBookmarkClick:b,className:y="",structure:A="nested"})=>{const[m,N]=p.useState([]),f=p.useMemo(()=>{const r=new Map;return w.forEach(a=>{const n=(Array.isArray(a.category)?a.category.join("/"):a.category).split("/").filter(d=>d.trim()!=="");if(n.length===0)r.has("Uncategorized")||r.set("Uncategorized",{id:"uncategorized",name:"Uncategorized",type:"folder",bookmarks:[],subfolders:new Map,path:"Uncategorized"}),r.get("Uncategorized").bookmarks.push(a);else{let d="",t=r;for(let s=0;s<n.length;s++){const o=n[s];d=d?`${d}/${o}`:o,t.has(o)||t.set(o,{id:d,name:o,type:"folder",bookmarks:[],subfolders:new Map,path:d});const u=t.get(o);s===n.length-1?u.bookmarks.push(a):(u.subfolders||(u.subfolders=new Map),t=u.subfolders)}}}),Array.from(r.values())},[w]),C=r=>{if(r===0)return f;if(r<=m.length){let a=f;for(let i=0;i<r;i++){const n=m[i],d=a.find(t=>t.name===n);if(d&&d.subfolders)a=Array.from(d.subfolders.values());else return[]}return a}return[]},j=()=>{if(m.length===0)return[];let r=f;for(let i=0;i<m.length-1;i++){const n=m[i],d=r.find(t=>t.name===n);if(d&&d.subfolders)r=Array.from(d.subfolders.values());else return[]}const a=r.find(i=>i.name===m[m.length-1]);return(a==null?void 0:a.bookmarks)||[]},L=(r,a)=>{const i=m.slice(0,a);i.push(r.name),N(i)},k=r=>{if(b)b(r);else try{typeof chrome<"u"&&chrome.tabs?chrome.tabs.create({url:r.url}):window.open(r.url,"_blank","noopener,noreferrer")}catch(a){console.error("Failed to open bookmark URL:",a),window.location.href=r.url}},z=r=>{try{return new URL(r).hostname.replace("www.","").split(".")[0]}catch{return"link"}},M=r=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(r).hostname}&sz=32`}catch{return""}},v=r=>r?new Date(r).toLocaleDateString():"Unknown date",x=[];for(let r=0;r<=m.length;r++){const a=C(r);a.length>0&&x.push(a)}const B=j();return e.jsxs("div",{className:`flex h-full overflow-x-auto ${y}`,children:[x.map((r,a)=>e.jsx("div",{className:`flex-shrink-0 border-r border-slate-200/50 bg-white/30 backdrop-blur-sm ${A==="flattened"?"w-64":B.length>0?"w-36":"w-48"}`,children:e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-xs font-medium text-slate-700 mb-2 truncate",children:a===0?"Categories":m[a-1]||"Folder"}),e.jsx("div",{className:"space-y-1",children:r.map(i=>e.jsx("div",{children:e.jsx("button",{onClick:()=>L(i,a),className:`w-full text-left p-2 rounded-lg hover:bg-slate-100/60 transition-colors ${m[a]===i.name?"bg-blue-50 border border-blue-200":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsxs("svg",{className:"w-3 h-3 text-slate-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),e.jsx("span",{className:"text-xs font-medium text-slate-900 truncate",children:i.name}),i.bookmarks&&i.bookmarks.length>0&&e.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded-full flex-shrink-0",children:i.bookmarks.length})]}),i.subfolders&&i.subfolders.size>0||i.bookmarks&&i.bookmarks.length>0?e.jsx("svg",{className:"w-3 h-3 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}):null]})})},i.id))})]})},a)),B.length>0&&e.jsx("div",{className:"flex-1 min-w-96 border-r border-slate-200/50 bg-white/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-4 h-full",children:[e.jsxs("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:["Bookmarks (",B.length,")"]}),e.jsxs("div",{className:"grid grid-cols-12 gap-3 mb-3 px-3 py-2 text-xs font-medium text-slate-600 border-b border-slate-200/50",children:[e.jsx("div",{className:"col-span-4",children:"Title"}),e.jsx("div",{className:"col-span-5",children:"Summary"}),e.jsx("div",{className:"col-span-2",children:"Date Added"}),e.jsx("div",{className:"col-span-1",children:"ID"})]}),e.jsx("div",{className:"space-y-2 overflow-y-auto",style:{height:"calc(100% - 80px)"},children:B.map((r,a)=>e.jsxs("div",{onClick:()=>k(r),title:`Click to open: ${r.url}`,className:"group grid grid-cols-12 gap-3 p-3 rounded-lg hover:bg-slate-100/60 transition-colors cursor-pointer border border-transparent hover:border-slate-200",children:[e.jsxs("div",{className:"col-span-4 flex items-center space-x-2 min-w-0",children:[e.jsxs("div",{className:"flex-shrink-0 w-6 h-6 rounded bg-slate-100 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:M(r.url),alt:"",className:"w-4 h-4",onError:i=>{var d;const n=i.target;n.style.display="none",(d=n.nextElementSibling)==null||d.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-4 h-4 bg-gradient-to-br from-slate-400 to-slate-500 rounded flex items-center justify-center text-white text-xs font-medium",children:z(r.url).charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 truncate group-hover:text-blue-600 transition-colors",children:r.title}),e.jsx("div",{className:"text-xs text-slate-500 truncate",children:z(r.url)})]})]}),e.jsx("div",{className:"col-span-5 text-sm text-slate-600 line-clamp-2 leading-relaxed",children:r.summary||"-"}),e.jsx("div",{className:"col-span-2 text-sm text-slate-500 flex items-center",children:v(r.dateAdded)}),e.jsxs("div",{className:"col-span-1 text-sm font-mono text-slate-500 flex items-center justify-between",children:[e.jsx("span",{children:r.id?`#${r.id.slice(0,6)}`:"-"}),e.jsx("svg",{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]},r.id||`${r.url}-${a}`))})]})})]})},_=()=>{const[w,b]=p.useState(null),[y,A]=p.useState(!1),[m,N]=p.useState([]),[f,C]=p.useState([]),[j,L]=p.useState(0),[k,z]=p.useState("columns"),[M,v]=p.useState(!1);p.useEffect(()=>{x();const s=async()=>{if(M){console.log("Skipping bookmark sync during categorization...");return}console.log("Bookmark changed, syncing with Chrome bookmarks...");try{await E.syncWithChromeBookmarks(),await x()}catch(o){console.error("Error syncing bookmarks:",o)}};return typeof chrome<"u"&&chrome.bookmarks&&(chrome.bookmarks.onCreated.addListener(s),chrome.bookmarks.onRemoved.addListener(s),chrome.bookmarks.onChanged.addListener(s),chrome.bookmarks.onMoved.addListener(s)),()=>{typeof chrome<"u"&&chrome.bookmarks&&(chrome.bookmarks.onCreated.removeListener(s),chrome.bookmarks.onRemoved.removeListener(s),chrome.bookmarks.onChanged.removeListener(s),chrome.bookmarks.onMoved.removeListener(s))}},[M]);const x=async()=>{const s=await V.get(R.USER_SETTINGS);b(s);const o=await E.getValidCategorizedBookmarks();N(o),C(o);const u=await E.getUncategorized();L(u.length)},B=async()=>{if(w){A(!0),v(!0);try{const s=await E.getUncategorized();if(s.length===0)return;const o=await E.getBookmarksWithDescriptions(s),u=await I.categorize({persona:w.persona,bookmarks:o,structure:w.structure});if(u.error)throw new Error(u.error);if(u.data){const l=await V.get(R.CATEGORIZED_BOOKMARKS)||{};u.data.forEach(c=>{c.id&&(l[c.id]={bookmark:c,categorizedAt:Date.now()})}),await V.set(R.CATEGORIZED_BOOKMARKS,l);try{await E.organizeBookmarksInChrome(u.data,w.structure==="flattened"?"flatten":"nested")}catch(c){console.warn("Failed to organize in Chrome bookmarks:",c)}await x(),await new Promise(c=>setTimeout(c,1e3))}}catch(s){console.error("Categorization error:",s)}finally{A(!1),v(!1)}}},r=async()=>{try{if(await V.remove(R.CATEGORIZED_BOOKMARKS),typeof chrome<"u"&&chrome.bookmarks){const s=await E.getAll();for(const o of s)if(o.id&&await E.isInCategorizedFolder(o))try{await chrome.bookmarks.remove(o.id),console.log(`Removed categorized bookmark: ${o.title}`)}catch(l){console.warn(`Failed to remove bookmark ${o.id}:`,l)}try{const u=(await chrome.bookmarks.getSubTree("1"))[0].id,c=(await chrome.bookmarks.getChildren(u)).find(h=>h.title==="📚 Categorized Bookmarks");c&&(await chrome.bookmarks.removeTree(c.id),console.log("Removed categorized bookmarks folder"))}catch(o){console.warn("Failed to remove categorized bookmarks folder:",o)}}N([]),C([]),await x(),console.log("Successfully cleared all categorized bookmarks")}catch(s){console.error("Error clearing all bookmarks:",s)}},a=s=>{chrome.tabs.create({url:s.url})},i=s=>{C(s)},n=s=>{const o=["blue","purple","green","orange","pink","indigo"],u=s.split("").reduce((l,c)=>l+c.charCodeAt(0),0);return o[u%o.length]},d=s=>{const o=new Map;s.forEach(l=>{const h=(Array.isArray(l.category)?l.category.join("/"):l.category).split("/").filter(S=>S.trim()!=="");if(h.length===0)o.has("Uncategorized")||o.set("Uncategorized",{bookmarks:[],subcategories:new Map}),o.get("Uncategorized").bookmarks.push(l);else{const S=h[0];o.has(S)||o.set(S,{bookmarks:[],subcategories:new Map});const $=o.get(S);if(h.length===1)$.bookmarks.push(l);else{let g=$.subcategories;for(let W=1;W<h.length;W++){const q=h[W];W===h.length-1?(g.has(q)||g.set(q,{bookmarks:[],subcategories:new Map}),g.get(q).bookmarks.push(l)):(g.has(q)||g.set(q,{bookmarks:[],subcategories:new Map}),g=g.get(q).subcategories)}}}});const u=[];for(const[l,c]of o)u.push({category:l,bookmarks:c.bookmarks,subcategories:c.subcategories});return u};if(!w)return e.jsx("div",{className:"min-h-screen liquid-gradient-secondary flex items-center justify-center p-6",children:e.jsxs("div",{className:"liquid-card text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 liquid-gradient-primary rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Setup Required"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Please complete the setup in the extension popup first."}),e.jsx(U,{onClick:()=>window.close(),children:"Close"})]})});const t=d(f);return console.log("All bookmarks:",m),console.log("Filtered bookmarks:",f),console.log("Bookmark groups:",t),e.jsxs("div",{className:"min-h-screen liquid-gradient-secondary",children:[e.jsx("div",{className:"liquid-glass border-b border-white/20 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 liquid-gradient-primary rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bookmark Spaces"}),e.jsxs("p",{className:"text-slate-600",children:["Organized by ",w.persona]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(U,{variant:"ghost",onClick:async()=>{try{await E.syncWithChromeBookmarks(),await x()}catch(s){console.error("Error syncing:",s)}},disabled:y,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(T,{bookmarks:m||[],onSearchResults:i,className:"w-full max-w-2xl"})}),e.jsx("div",{className:"mb-8 space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"liquid-card py-3 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Uncategorized"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:j})]})]})}),e.jsx("div",{className:"liquid-card py-3 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Categorized"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:m.length})]})]})}),e.jsx("div",{className:"liquid-card py-3 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Spaces"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:t.length})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(U,{onClick:B,loading:y,disabled:j===0,children:y?"Categorizing...":`Categorize ${j} Bookmarks`}),e.jsx(U,{variant:"outline",onClick:r,disabled:m.length===0,children:"Clear All"})]})]})}),y&&e.jsxs("div",{className:"liquid-card text-center py-12",children:[e.jsx(F,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Analyzing your bookmarks and categorizing them..."})]}),!y&&e.jsx(e.Fragment,{children:f.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900",children:[k==="spaces"?"Bookmark Spaces":"All Bookmarks"," (",f.length,")"]}),e.jsx("div",{className:"liquid-nav",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("button",{onClick:()=>z("columns"),className:`liquid-nav-item ${k==="columns"?"active":""}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),e.jsx("span",{children:"Columns"})]}),e.jsxs("button",{onClick:()=>z("spaces"),className:`liquid-nav-item ${k==="spaces"?"active":""}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("span",{children:"Spaces"})]}),e.jsxs("button",{onClick:()=>z("list"),className:`liquid-nav-item ${k==="list"?"active":""}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),e.jsx("span",{children:"List"})]})]})})]}),k==="columns"?e.jsx("div",{className:"liquid-card h-96",children:e.jsx(G,{bookmarks:f,onBookmarkClick:a,className:"h-full"})}):k==="spaces"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((s,o)=>e.jsx("div",{className:"liquid-scale-in",style:{animationDelay:`${o*100}ms`},children:e.jsx(H,{title:s.category,bookmarks:s.bookmarks,subcategories:s.subcategories,color:n(s.category),onBookmarkClick:a})},o))}):e.jsx("div",{className:"liquid-card",children:e.jsx("div",{className:"space-y-3",children:f.map((s,o)=>e.jsxs("div",{onClick:()=>a(s),className:"flex items-center space-x-4 p-4 rounded-xl hover:bg-white/60 transition-all duration-200 cursor-pointer group",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center",children:e.jsx("img",{src:`https://www.google.com/s2/favicons?domain=${new URL(s.url).hostname}&sz=32`,alt:"",className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-slate-900 truncate group-hover:text-blue-600 transition-colors",children:s.title}),e.jsx("p",{className:"text-sm text-slate-500 truncate",children:s.url}),e.jsx("p",{className:"text-xs text-slate-400",children:s.category})]}),e.jsx("svg",{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},s.id||`${s.url}-${o}`))})})]}):e.jsxs("div",{className:"liquid-card text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 text-slate-400",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No bookmarks found"}),e.jsx("p",{className:"text-slate-600",children:j>0?`Click "Categorize Bookmarks" to organize your ${j} bookmarks.`:"All your bookmarks are already categorized!"})]})})]})]})};function Z(){return e.jsx("div",{className:"h-screen w-full",children:e.jsx(_,{})})}D.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(Z,{})}));
