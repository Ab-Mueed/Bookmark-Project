import{r as C,j as e,B as E,C as V,S as W,a as A,b as H,L as F,P as O,c as T,R as I}from"./chunks/index.DBYGoL3i.js";const G=({bookmarks:n,onSearchResults:r,placeholder:i="Search bookmarks, categories, or describe what you're looking for...",className:l=""})=>{const[o,u]=C.useState(""),[p,x]=C.useState(!1),[f,N]=C.useState([]),[k,j]=C.useState([]),v=C.useRef(null),g=n||[];console.log("IntentSearch render:",{bookmarksLength:g.length,query:o,isFocused:p,className:l});const w={category:/\b(category|folder|space|group|type)\b/i,recent:/\b(recent|latest|new|today|yesterday)\b/i,favorite:/\b(favorite|starred|important|essential)\b/i,learning:/\b(learn|study|course|tutorial|education|training)\b/i,work:/\b(work|job|professional|business|productivity)\b/i,entertainment:/\b(fun|entertainment|game|video|music|social)\b/i,url:/\b(https?:\/\/|www\.|\.com|\.org|\.net)\b/i},S=s=>{if(!s.trim())return[];const a=[],y=s.toLowerCase(),L=[...new Set(g.map(b=>Array.isArray(b.category)?b.category.join("/"):b.category))].filter(b=>b.toLowerCase().includes(y)).slice(0,3);a.push(...L);const B=g.filter(b=>b.title.toLowerCase().includes(y)).map(b=>b.title).slice(0,2);return a.push(...B),w.learning.test(s)&&a.push("Learning courses","Programming tutorials","Study materials"),w.work.test(s)&&a.push("Work tools","Productivity apps","Business resources"),w.entertainment.test(s)&&a.push("Entertainment","Social media","Videos"),[...new Set(a)].slice(0,5)},t=s=>{const a=[];return w.category.test(s)&&a.push({type:"category",query:s,weight:.8}),w.recent.test(s)&&a.push({type:"recent",query:s,weight:.7}),w.favorite.test(s)&&a.push({type:"favorite",query:s,weight:.7}),w.learning.test(s)&&a.push({type:"learning",query:s,weight:.9}),w.work.test(s)&&a.push({type:"work",query:s,weight:.9}),w.entertainment.test(s)&&a.push({type:"entertainment",query:s,weight:.9}),w.url.test(s)&&a.push({type:"url",query:s,weight:.6}),s.trim()&&a.push({type:"title",query:s,weight:.5}),a},c=s=>{if(!s.trim())return r(g),g;const a=t(s),y=new Map;a.forEach(L=>{g.forEach(B=>{let b=0;const q=L.query.toLowerCase(),R=B.title.toLowerCase(),M=Array.isArray(B.category)?B.category.join("/").toLowerCase():B.category.toLowerCase(),U=B.url.toLowerCase();switch(L.type){case"category":M.includes(q)&&(b+=L.weight*2);break;case"title":R.includes(q)&&(b+=L.weight),R.startsWith(q)&&(b+=L.weight*.5);break;case"url":U.includes(q)&&(b+=L.weight);break;case"recent":B.categorizedAt&&Date.now()-B.categorizedAt<7*24*60*60*1e3&&(b+=L.weight);break;case"learning":(M.includes("learn")||M.includes("course")||M.includes("tutorial")||M.includes("education"))&&(b+=L.weight*1.5);break;case"work":(M.includes("work")||M.includes("business")||M.includes("productivity")||M.includes("professional"))&&(b+=L.weight*1.5);break;case"entertainment":(M.includes("entertainment")||M.includes("social")||M.includes("video")||M.includes("game"))&&(b+=L.weight*1.5);break}if(b>0){const P=y.get(B.id||B.url);(!P||b>P.score)&&y.set(B.id||B.url,{bookmark:B,score:b})}})});const z=Array.from(y.values()).sort((L,B)=>B.score-L.score).map(L=>L.bookmark);return r(z),z},h=s=>{u(s);const a=S(s);N(a),c(s),s.trim()&&!k.includes(s.trim())&&j(y=>[s.trim(),...y.slice(0,4)])},d=s=>{var a;u(s),N([]),c(s),(a=v.current)==null||a.blur()},m=s=>{var a;s.key==="Escape"&&(N([]),x(!1),(a=v.current)==null||a.blur())};return C.useEffect(()=>{r(g)},[g]),e.jsxs("div",{className:`relative ${l}`,style:{minHeight:"60px"},children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:v,type:"text",value:o,onChange:s=>h(s.target.value),onFocus:()=>x(!0),onBlur:()=>setTimeout(()=>x(!1),200),onKeyDown:m,placeholder:i,className:"liquid-search",style:{minHeight:"48px"}}),e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o&&e.jsx("button",{onClick:()=>h(""),className:"absolute right-12 top-1/2 transform -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p&&(f.length>0||k.length>0)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 liquid-glass rounded-2xl p-2 z-50 max-h-80 overflow-y-auto",children:[k.length>0&&!o&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 px-3 py-2",children:"Recent Searches"}),k.map((s,a)=>e.jsxs("button",{onClick:()=>d(s),className:"w-full text-left px-3 py-2 rounded-xl text-sm text-slate-600 hover:bg-white/60 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:s})]},a))]}),f.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-slate-500 px-3 py-2",children:"Suggestions"}),f.map((s,a)=>e.jsxs("button",{onClick:()=>d(s),className:"w-full text-left px-3 py-2 rounded-xl text-sm text-slate-600 hover:bg-white/60 transition-colors flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("span",{children:s})]},a))]})]})]})},K=({bookmarks:n,onBookmarkClick:r,className:i="",structure:l="nested"})=>{const[o,u]=C.useState([]),p=C.useMemo(()=>{const t=new Map;return n.forEach(c=>{const d=(Array.isArray(c.category)?c.category.join("/"):c.category).split("/").filter(m=>m.trim()!=="");if(d.length===0)t.has("Uncategorized")||t.set("Uncategorized",{id:"uncategorized",name:"Uncategorized",type:"folder",bookmarks:[],subfolders:new Map,path:"Uncategorized"}),t.get("Uncategorized").bookmarks.push(c);else{let m="",s=t;for(let a=0;a<d.length;a++){const y=d[a];m=m?`${m}/${y}`:y,s.has(y)||s.set(y,{id:m,name:y,type:"folder",bookmarks:[],subfolders:new Map,path:m});const z=s.get(y);a===d.length-1?z.bookmarks.push(c):(z.subfolders||(z.subfolders=new Map),s=z.subfolders)}}}),Array.from(t.values())},[n]),x=t=>{if(t===0)return p;if(t<=o.length){let c=p;for(let h=0;h<t;h++){const d=o[h],m=c.find(s=>s.name===d);if(m&&m.subfolders)c=Array.from(m.subfolders.values());else return[]}return c}return[]},f=()=>{if(o.length===0)return[];let t=p;for(let h=0;h<o.length-1;h++){const d=o[h],m=t.find(s=>s.name===d);if(m&&m.subfolders)t=Array.from(m.subfolders.values());else return[]}const c=t.find(h=>h.name===o[o.length-1]);return(c==null?void 0:c.bookmarks)||[]},N=(t,c)=>{const h=o.slice(0,c);h.push(t.name),u(h)},k=t=>{if(r)r(t);else try{typeof chrome<"u"&&chrome.tabs?chrome.tabs.create({url:t.url}):window.open(t.url,"_blank","noopener,noreferrer")}catch(c){console.error("Failed to open bookmark URL:",c),window.location.href=t.url}},j=t=>{try{return new URL(t).hostname.replace("www.","").split(".")[0]}catch{return"link"}},v=t=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(t).hostname}&sz=32`}catch{return""}},g=t=>t?new Date(t).toLocaleDateString():"Unknown date",w=[];for(let t=0;t<=o.length;t++){const c=x(t);c.length>0&&w.push(c)}const S=f();return e.jsxs("div",{className:`flex h-full overflow-x-auto ${i}`,children:[w.map((t,c)=>e.jsx("div",{className:`flex-shrink-0 border-r border-slate-200/50 bg-white/30 backdrop-blur-sm ${l==="flattened"?"w-64":S.length>0?"w-36":"w-48"}`,children:e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-xs font-medium text-slate-700 mb-2 truncate",children:c===0?"Categories":o[c-1]||"Folder"}),e.jsx("div",{className:"space-y-1",children:t.map(h=>e.jsx("div",{children:e.jsx("button",{onClick:()=>N(h,c),className:`w-full text-left p-2 rounded-lg hover:bg-slate-100/60 transition-colors ${o[c]===h.name?"bg-blue-50 border border-blue-200":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsxs("svg",{className:"w-3 h-3 text-slate-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),e.jsx("span",{className:"text-xs font-medium text-slate-900 truncate",children:h.name}),h.bookmarks&&h.bookmarks.length>0&&e.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded-full flex-shrink-0",children:h.bookmarks.length})]}),h.subfolders&&h.subfolders.size>0||h.bookmarks&&h.bookmarks.length>0?e.jsx("svg",{className:"w-3 h-3 text-slate-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}):null]})})},h.id))})]})},c)),S.length>0&&e.jsx("div",{className:"flex-1 min-w-96 border-r border-slate-200/50 bg-white/30 backdrop-blur-sm",children:e.jsxs("div",{className:"p-4 h-full",children:[e.jsxs("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:["Bookmarks (",S.length,")"]}),e.jsxs("div",{className:"grid grid-cols-12 gap-3 mb-3 px-3 py-2 text-xs font-medium text-slate-600 border-b border-slate-200/50",children:[e.jsx("div",{className:"col-span-4",children:"Title"}),e.jsx("div",{className:"col-span-5",children:"Summary"}),e.jsx("div",{className:"col-span-2",children:"Date Added"}),e.jsx("div",{className:"col-span-1",children:"ID"})]}),e.jsx("div",{className:"space-y-2 overflow-y-auto",style:{height:"calc(100% - 80px)"},children:S.map((t,c)=>e.jsxs("div",{onClick:()=>k(t),title:`Click to open: ${t.url}`,className:"group grid grid-cols-12 gap-3 p-3 rounded-lg hover:bg-slate-100/60 transition-colors cursor-pointer border border-transparent hover:border-slate-200",children:[e.jsxs("div",{className:"col-span-4 flex items-center space-x-2 min-w-0",children:[e.jsxs("div",{className:"flex-shrink-0 w-6 h-6 rounded bg-slate-100 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:v(t.url),alt:"",className:"w-4 h-4",onError:h=>{var m;const d=h.target;d.style.display="none",(m=d.nextElementSibling)==null||m.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-4 h-4 bg-gradient-to-br from-slate-400 to-slate-500 rounded flex items-center justify-center text-white text-xs font-medium",children:j(t.url).charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 truncate group-hover:text-blue-600 transition-colors",children:t.title}),e.jsx("div",{className:"text-xs text-slate-500 truncate",children:j(t.url)})]})]}),e.jsx("div",{className:"col-span-5 text-sm text-slate-600 line-clamp-2 leading-relaxed",children:t.summary||"-"}),e.jsx("div",{className:"col-span-2 text-sm text-slate-500 flex items-center",children:g(t.dateAdded)}),e.jsxs("div",{className:"col-span-1 text-sm font-mono text-slate-500 flex items-center justify-between",children:[e.jsx("span",{children:t.id?`#${t.id.slice(0,6)}`:"-"}),e.jsx("svg",{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]},t.id||`${t.url}-${c}`))})]})})]})},_=({settings:n,isLoading:r,onSync:i})=>e.jsx("div",{className:"liquid-glass border-b border-white/20 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 liquid-gradient-primary rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bookmark Spaces"}),e.jsxs("p",{className:"text-slate-600",children:["Organized by ",n.persona]})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(E,{variant:"ghost",onClick:i,disabled:r,children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("title",{children:"Sync bookmarks"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.93 4.93a10 10 0 0114.14 0m0 0V1m0 3.93H17m-1.07 13.07a10 10 0 01-14.14 0m0 0V23m0-3.93H7"})]})})})]})})}),Z=({uncategorizedCount:n,categorizedCount:r,spacesCount:i,isLoading:l,onCategorize:o,onClearAll:u})=>e.jsx("div",{className:"mb-8 space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"liquid-card py-3 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Uncategorized"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:n})]})]})}),e.jsx("div",{className:"liquid-card py-3 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Categorized"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:r})]})]})}),e.jsx("div",{className:"liquid-card py-3 px-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Spaces"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:i})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{onClick:o,loading:l,disabled:n===0,children:l?"Categorizing...":`Categorize ${n} Bookmarks`}),e.jsx(E,{variant:"outline",onClick:u,disabled:r===0,children:"Clear All"})]})]})}),Y=({viewMode:n,onViewModeChange:r})=>e.jsx("div",{className:"liquid-nav",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("button",{onClick:()=>r("columns"),className:`liquid-nav-item ${n==="columns"?"active":""}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),e.jsx("span",{children:"Columns"})]}),e.jsxs("button",{onClick:()=>r("spaces"),className:`liquid-nav-item ${n==="spaces"?"active":""}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("span",{children:"Spaces"})]}),e.jsxs("button",{onClick:()=>r("list"),className:`liquid-nav-item ${n==="list"?"active":""}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),e.jsx("span",{children:"List"})]})]})}),J=({bookmarks:n,onBookmarkClick:r})=>e.jsx("div",{className:"liquid-card",children:e.jsx("div",{className:"space-y-3",children:n.map((i,l)=>e.jsxs("div",{onClick:()=>r(i),className:"flex items-center space-x-4 p-4 rounded-xl hover:bg-white/60 transition-all duration-200 cursor-pointer group",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center",children:e.jsx("img",{src:`https://www.google.com/s2/favicons?domain=${new URL(i.url).hostname}&sz=32`,alt:"",className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-slate-900 truncate group-hover:text-blue-600 transition-colors",children:i.title}),e.jsx("p",{className:"text-sm text-slate-500 truncate",children:i.url}),e.jsx("p",{className:"text-xs text-slate-400",children:i.category})]}),e.jsx("svg",{className:"w-4 h-4 text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},i.id||`${i.url}-${l}`))})}),X={blue:"from-blue-500/20 to-blue-600/20 text-blue-600",purple:"from-purple-500/20 to-purple-600/20 text-purple-600",green:"from-green-500/20 to-green-600/20 text-green-600",orange:"from-orange-500/20 to-orange-600/20 text-orange-600",pink:"from-pink-500/20 to-pink-600/20 text-pink-600",indigo:"from-indigo-500/20 to-indigo-600/20 text-indigo-600"},Q={blue:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),purple:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),green:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),orange:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),pink:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),indigo:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},D=({title:n,bookmarks:r,subcategories:i,icon:l,color:o="blue",onBookmarkClick:u,onSpaceClick:p,className:x="",level:f=0})=>{const[N,k]=C.useState(!1),[j,v]=C.useState(!1),g=()=>{k(!N),p==null||p()},w=d=>{u==null||u(d)},S=d=>{try{return new URL(d).hostname.replace("www.","").split(".")[0]}catch{return"link"}},t=d=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(d).hostname}&sz=32`}catch{return""}},c=(d,m)=>{let s=d.length;if(m)for(const a of m.values())s+=c(a.bookmarks,a.subcategories);return s},h=c(r,i);return e.jsxs("div",{className:`liquid-space ${x} ${f>0?"ml-4 border-l-2 border-slate-200/50 pl-4":""}`,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[e.jsxs("div",{className:"liquid-space-header",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`liquid-space-icon bg-gradient-to-br ${X[o]}`,children:l||Q[o]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:n}),e.jsxs("p",{className:"text-sm text-slate-500",children:[h," bookmarks"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:g,className:`p-2 rounded-xl transition-all duration-200 ${j?"bg-white/60 text-slate-600":"text-slate-400"}`,children:e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${N?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})})]}),N&&e.jsxs("div",{className:"space-y-2 liquid-fade-in",children:[r.slice(0,5).map((d,m)=>e.jsxs("div",{onClick:()=>w(d),className:"group flex items-center space-x-3 p-3 rounded-xl hover:bg-white/60 transition-all duration-200 cursor-pointer",children:[e.jsxs("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center overflow-hidden",children:[e.jsx("img",{src:t(d.url),alt:"",className:"w-5 h-5",onError:s=>{var y;const a=s.target;a.style.display="none",(y=a.nextElementSibling)==null||y.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-5 h-5 bg-gradient-to-br from-slate-400 to-slate-500 rounded flex items-center justify-center text-white text-xs font-medium",children:S(d.url).charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-900 truncate group-hover:text-blue-600 transition-colors",children:d.title}),e.jsx("p",{className:"text-xs text-slate-500 truncate",children:S(d.url)})]}),e.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]},d.id||`${d.url}-${m}`)),r.length>5&&e.jsx("div",{className:"text-center py-2",children:e.jsxs("span",{className:"text-xs text-slate-500",children:["+",r.length-5," more bookmarks"]})}),i&&Array.from(i.entries()).map(([d,m])=>e.jsx(D,{title:d,bookmarks:m.bookmarks,subcategories:m.subcategories,color:o,onBookmarkClick:u,level:f+1},d))]})]})},$=n=>{chrome.tabs.create({url:n.url})},ee=n=>{const r=["blue","purple","green","orange","pink","indigo"],i=n.split("").reduce((l,o)=>l+o.charCodeAt(0),0);return r[i%r.length]},se=n=>{const r=new Map;n.forEach(l=>{const u=(Array.isArray(l.category)?l.category.join("/"):l.category).split("/").filter(p=>p.trim()!=="");if(u.length===0)r.has("Uncategorized")||r.set("Uncategorized",{bookmarks:[],subcategories:new Map}),r.get("Uncategorized").bookmarks.push(l);else{const p=u[0];r.has(p)||r.set(p,{bookmarks:[],subcategories:new Map});const x=r.get(p);if(u.length===1)x.bookmarks.push(l);else{let f=x.subcategories;for(let N=1;N<u.length;N++){const k=u[N];N===u.length-1?(f.has(k)||f.set(k,{bookmarks:[],subcategories:new Map}),f.get(k).bookmarks.push(l)):(f.has(k)||f.set(k,{bookmarks:[],subcategories:new Map}),f=f.get(k).subcategories)}}}});const i=[];for(const[l,o]of r)i.push({category:l,bookmarks:o.bookmarks,subcategories:o.subcategories});return i},te=async(n,r,i)=>{try{if(await V.remove(W.CATEGORIZED_BOOKMARKS),typeof chrome<"u"&&chrome.bookmarks){const l=await A.getAll();for(const o of l)if(o.id&&await A.isInCategorizedFolder(o))try{await chrome.bookmarks.remove(o.id),console.log(`Removed categorized bookmark: ${o.title}`)}catch(p){console.warn(`Failed to remove bookmark ${o.id}:`,p)}try{const u=(await chrome.bookmarks.getSubTree("1"))[0].id,x=(await chrome.bookmarks.getChildren(u)).find(f=>f.title==="ðŸ“š Categorized Bookmarks");x&&(await chrome.bookmarks.removeTree(x.id),console.log("Removed categorized bookmarks folder"))}catch(o){console.warn("Failed to remove categorized bookmarks folder:",o)}}n([]),r([]),await i(),console.log("Successfully cleared all categorized bookmarks")}catch(l){console.error("Error clearing all bookmarks:",l)}},re=({bookmarks:n,onBookmarkClick:r})=>{const i=se(n);return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((l,o)=>e.jsx("div",{className:"liquid-scale-in",style:{animationDelay:`${o*100}ms`},children:e.jsx(D,{title:l.category,bookmarks:l.bookmarks,subcategories:l.subcategories,color:ee(l.category),onBookmarkClick:r})},o))})},oe=({uncategorizedCount:n})=>e.jsxs("div",{className:"liquid-card text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 text-slate-400",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No bookmarks found"}),e.jsx("p",{className:"text-slate-600",children:n>0?`Click "Categorize Bookmarks" to organize your ${n} bookmarks.`:"All your bookmarks are already categorized!"})]}),ae=()=>e.jsx("div",{className:"min-h-screen liquid-gradient-secondary flex items-center justify-center p-6",children:e.jsxs("div",{className:"liquid-card text-center max-w-md",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 liquid-gradient-primary rounded-2xl flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Setup Required"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Please complete the setup in the extension popup first."}),e.jsx(E,{onClick:()=>window.close(),children:"Close"})]})}),ne=()=>{const[n,r]=C.useState(null),[i,l]=C.useState(!1),[o,u]=C.useState([]),[p,x]=C.useState([]),[f,N]=C.useState(0),[k,j]=C.useState(!1),v=async()=>{const g=await V.get(W.USER_SETTINGS);r(g);const w=await A.getValidCategorizedBookmarks();u(w),x(w);const S=await A.getUncategorized();N(S.length)};return C.useEffect(()=>{v();const g=async()=>{if(k){console.log("Skipping bookmark sync during categorization...");return}console.log("Bookmark changed, syncing with Chrome bookmarks...");try{await A.syncWithChromeBookmarks(),await v()}catch(w){console.error("Error syncing bookmarks:",w)}};return typeof chrome<"u"&&chrome.bookmarks&&(chrome.bookmarks.onCreated.addListener(g),chrome.bookmarks.onRemoved.addListener(g),chrome.bookmarks.onChanged.addListener(g),chrome.bookmarks.onMoved.addListener(g)),()=>{typeof chrome<"u"&&chrome.bookmarks&&(chrome.bookmarks.onCreated.removeListener(g),chrome.bookmarks.onRemoved.removeListener(g),chrome.bookmarks.onChanged.removeListener(g),chrome.bookmarks.onMoved.removeListener(g))}},[k]),{settings:n,isLoading:i,setIsLoading:l,allBookmarks:o,setAllBookmarks:u,filteredBookmarks:p,setFilteredBookmarks:x,uncategorizedCount:f,isCategorizing:k,setIsCategorizing:j,loadData:v}},ie=(n,r,i,l)=>{const[o,u]=C.useState(!1),[p,x]=C.useState([]);return{previewOpen:o,previewBookmarks:p,handleCategorizeBookmarks:async()=>{if(n){r(!0),i(!0);try{const j=await A.getUncategorized();if(j.length===0){r(!1),i(!1);return}const v=await A.getBookmarksWithDescriptions(j),g=await H.categorize({persona:n.persona,bookmarks:v,structure:n.structure});if(g.error)throw new Error(g.error);g.data&&(x(g.data),u(!0))}catch(j){console.error("Categorization error:",j),r(!1),i(!1)}}},handleAcceptPreview:async()=>{u(!1),r(!0),i(!0);try{if(!n){r(!1),i(!1),x([]);return}const j=await V.get(W.CATEGORIZED_BOOKMARKS)||{};p.forEach(v=>{v.id&&(j[v.id]={bookmark:v,categorizedAt:Date.now()})}),await V.set(W.CATEGORIZED_BOOKMARKS,j),await A.organizeBookmarksInChrome(p,n.structure==="flattened"?"flatten":"nested"),await l(),await new Promise(v=>setTimeout(v,1e3))}catch(j){console.error("Error organizing bookmarks:",j)}finally{r(!1),i(!1),x([])}},handleDenyPreview:()=>{u(!1),r(!1),i(!1),x([])}}},le=()=>{const[n,r]=C.useState("columns"),{settings:i,isLoading:l,setIsLoading:o,allBookmarks:u,setAllBookmarks:p,filteredBookmarks:x,setFilteredBookmarks:f,uncategorizedCount:N,setIsCategorizing:k,loadData:j}=ne(),{previewOpen:v,previewBookmarks:g,handleCategorizeBookmarks:w,handleAcceptPreview:S,handleDenyPreview:t}=ie(i,o,k,j),c=s=>{f(s)},h=async()=>{try{await j()}catch(s){console.error("Error syncing:",s)}},d=()=>{te(p,f,j)};if(!i)return e.jsx(ae,{});const m=x.length>0?x.reduce((s,a)=>{const y=Array.isArray(a.category)?a.category.join("/"):a.category;return s[y]||(s[y]=[]),s[y].push(a),s},{}):{};return console.log("All bookmarks:",u),console.log("Filtered bookmarks:",x),console.log("Bookmark groups:",m),e.jsxs("div",{className:"min-h-screen liquid-gradient-secondary",children:[e.jsx(_,{settings:i,isLoading:l,onSync:h}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(G,{bookmarks:u||[],onSearchResults:c,className:"w-full max-w-2xl"})}),e.jsx(Z,{uncategorizedCount:N,categorizedCount:u.length,spacesCount:Object.keys(m).length,isLoading:l,onCategorize:w,onClearAll:d}),l&&e.jsxs("div",{className:"liquid-card text-center py-12",children:[e.jsx(F,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Analyzing your bookmarks and categorizing them..."})]}),!l&&e.jsx(e.Fragment,{children:x.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900",children:[n==="spaces"?"Bookmark Spaces":"All Bookmarks"," (",x.length,")"]}),e.jsx(Y,{viewMode:n,onViewModeChange:r})]}),n==="columns"?e.jsx("div",{className:"liquid-card h-96",children:e.jsx(K,{bookmarks:x,onBookmarkClick:$,className:"h-full"})}):n==="spaces"?e.jsx(re,{bookmarks:x,onBookmarkClick:$}):e.jsx(J,{bookmarks:x,onBookmarkClick:$})]}):e.jsx(oe,{uncategorizedCount:N})})]}),e.jsx(O,{isOpen:v,onAccept:S,onDeny:t,categorizedBookmarks:g})]})};function ce(){return e.jsx("div",{className:"h-screen w-full",children:e.jsx(le,{})})}T.createRoot(document.getElementById("root")).render(e.jsx(I.StrictMode,{children:e.jsx(ce,{})}));
